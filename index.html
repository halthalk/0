<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halthalk-Ù…Ù†ØµØ© Ø­Ù„ØªÙ‡Ø§Ù„Ùƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> <style>
        /* ------------------------------------- */
        /* --------- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --------- */
        /* ------------------------------------- */
        body { 
            margin: 0; 
            padding: 0; 
            font-family: 'Cairo', Arial, sans-serif; 
            background: #ffffff; /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ù†Ø¸ÙŠÙØ© Ù…Ø«Ù„ X */
            color: #14171a; /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙÙŠ X */
            user-select: none; /* Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ ÙˆØ§Ù„Ù†Ø³Ø® */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            transition: background 0.3s, color 0.3s; /* Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ Ù„Ù„Ø«ÙŠÙ… */
        }
        body.dark-mode {
            background: #15202b; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
            color: #ffffff; /* Ù†ØµÙˆØµ Ø¨ÙŠØ¶Ø§Ø¡ */
        }
        body.dark-mode .header {
            background: #15202b;
            border-bottom: 1px solid #38444d;
        }
        body.dark-mode .sidebar {
            background: #15202b;
            border-right: 1px solid #38444d;
        }
        body.dark-mode .sidebar .menu-item {
            color: #ffffff;
        }
        body.dark-mode .sidebar .menu-item:hover {
            background: #1e2732;
        }
        body.dark-mode .welcome-section h1 {
            color: #ffffff;
        }
        body.dark-mode .tribute-text {
            color: #ffffff;
        }
        body.dark-mode .stat-title {
            color: #8899a6;
        }
        body.dark-mode .footer {
            color: #8899a6;
        }
        body.dark-mode .logo {
            display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø¹Ø§Ø¯ÙŠ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        }
        body.dark-mode .logo-dark {
            display: block; /* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: #ffffff;
            border-bottom: 1px solid #e1e8ed;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
        }
        .nav-links {
            display: flex;
            gap: 20px;
        }
        .nav-links a {
            color: #1da1f2;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer; /* ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„ÙŠØ¯ */
        }
        .nav-links a:hover {
            text-decoration: underline;
        }
        .logo {
            width: 120px;
            height: 60px;
            object-fit: contain;
        }
        .logo-dark {
            width: 120px;
            height: 60px;
            object-fit: contain;
            display: none;
        }
        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #1da1f2;
            border: none;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
            margin-left: 10px;
        }
        .theme-toggle:hover {
            background: #0d95e8;
        }
        .sidebar {
            position: fixed;
            left: 0;
            top: 70px;
            width: 250px;
            height: calc(100vh - 70px);
            background: #ffffff;
            border-right: 1px solid #e1e8ed;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .sidebar .menu-item {
            display: block;
            padding: 12px 0;
            color: #14171a;
            text-decoration: none;
            border-radius: 8px;
            transition: background 0.2s;
            cursor: pointer; /* ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„ÙŠØ¯ */
        }
        .sidebar .menu-item:hover {
            background: #f5f8fa;
        }
        .sidebar .menu-item i {
            margin-left: 10px;
        }
        .main-content {
            margin-left: 250px;
            margin-top: 70px;
            padding: 20px;
            max-width: 600px;
        }
        .welcome-section {
            text-align: center;
            margin-bottom: 30px;
        }
        .welcome-section h1 {
            color: #14171a;
            font-size: 2em;
            margin-bottom: 10px;
        }
        .buttons-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        .button {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px 5px;
            font-size: 0.9em;
            color: #ffffff;
            background: #1da1f2;
            border: none;
            border-radius: 20px;
            text-decoration: none;
            transition: background 0.3s;
            cursor: pointer;
        }
        .button:hover {
            background: #0d95e8;
        }
        .floating-button {
            position: relative;
            animation: float 3s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(29, 161, 242, 0.5);
            background: linear-gradient(45deg, #1da1f2, #0d95e8);
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .floating-button:hover {
            box-shadow: 0 0 30px rgba(29, 161, 242, 0.8);
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .tribute-text {
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            color: #14171a;
            margin: 20px 0;
            line-height: 1.5;
        }
        .universities-section {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .university-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            animation: float 3s ease-in-out infinite;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .university-image:hover {
            transform: scale(1.1);
        }
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .stat-item {
            text-align: center;
            margin: 10px;
        }
        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #1da1f2;
        }
        .stat-title {
            color: #657786;
            font-size: 0.9em;
        }
        .footer {
            text-align: center;
            margin-top: 50px;
            color: #657786;
            font-size: 0.8em;
        }
        .footer a {
            color: #1da1f2;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        /* Media query Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            .main-content {
                margin-left: 0;
            }
            .universities-section {
                gap: 10px;
            }
        }

        /* ------------------------------------- */
        /* --------- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©) --------- */
        /* ------------------------------------- */
        .modal {
            display: none;
            position: fixed;
            z-index: 200; /* Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø§Ù„Ù€ header */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4); /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹ */
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px); /* ØªØ£Ø«ÙŠØ± Ø¶Ø¨Ø§Ø¨ÙŠ */
        }
        
        /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ù„Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .chat-container-modal {
            --bg-body: transparent; 
            --bg-container: #ffffff; 
            --bg-header: #0088cc;
            --bg-footer: #f5f5f5;
            --bg-input: #e8e8e8;
            --color-text: #000000;
            --color-text-light: #657786;
            --color-status: #b0d4ff;
            --color-bubble-in: #e1ffc7; 
            --color-bubble-out: #0088cc; 
            --color-border: #dddddd;
            --color-placeholder: #aaaaaa;
            --color-icons: #0088cc;
        }

        .dark-mode .chat-container-modal {
            --bg-body: transparent;
            --bg-container: #1e1e1e; 
            --bg-header: #0088cc;
            --bg-footer: #2a2a2a;
            --bg-input: #333333;
            --color-text: #ffffff;
            --color-text-light: #cccccc;
            --color-status: #b0d4ff;
            --color-bubble-in: #3d3d3d; 
            --color-bubble-out: #0088cc;
            --color-border: #555555;
            --color-placeholder: #cccccc;
            --color-icons: #cccccc;
        }

        .chat-container {
            width: 100%;
            max-width: 600px;
            height: 90vh; 
            background-color: var(--bg-container);
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        .chat-header {
            background-color: var(--bg-header);
            color: white;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .back-btn {
            color: white;
            font-size: 20px;
            margin-left: 15px;
            text-decoration: none;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
            background-image: url('https://raw.githubusercontent.com/elmoftary-vr/Halthalk/723410ea20433e1f1c1426172be62020ae77c91f/IMG_20250904_202748_135.jpg');
            background-size: cover;
            background-position: center;
        }

        .name-and-status {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .name {
            font-size: 16px;
            font-weight: bold;
        }

        .status {
            font-size: 12px;
            color: var(--color-status);
            margin-top: 2px;
        }

        .chat-messages {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            background-color: transparent;
        }

        .message {
            margin-bottom: 10px;
            display: flex;
            justify-content: flex-start;
        }

        .message.sent {
            justify-content: flex-end;
        }

        .message-bubble {
            background-color: var(--color-bubble-in);
            color: var(--color-text); 
            padding: 8px 12px;
            border-radius: 18px 18px 18px 4px;
            max-width: 70%;
            word-wrap: break-word;
            position: relative;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            border: 1px solid var(--color-border); 
            display: flex; /* Ù„ØªØ±ØªÙŠØ¨ Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„ÙÙ‚Ø§Ø¹Ø© */
            flex-direction: column;
        }
        
        .message.sent .message-bubble {
            background-color: var(--color-bubble-out);
            color: white;
            border-radius: 18px 18px 4px 18px;
            border: 1px solid #005999; 
        }
        
        .message-bubble::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -8px;
            width: 0;
            height: 0;
            border: 8px solid transparent;
            border-right-color: var(--color-bubble-in);
            border-bottom: none;
        }

        .message.sent .message-bubble::after {
            display: none; 
        }

        .sender {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--color-text); 
            font-size: 14px;
        }

        .message.sent .sender {
             color: white; 
        }

        .timestamp {
            font-size: 12px;
            color: var(--color-text-light);
            margin-top: 5px;
            display: block;
            text-align: left;
        }
        
        .message.sent .timestamp {
            align-self: flex-end; /* ÙˆØ¶Ø¹ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± ÙÙŠ ÙÙ‚Ø§Ø¹Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
        }
        
        .loading-indicator {
            font-size: 12px;
            color: #ffcc00; /* Ù„ÙˆÙ† Ø£ØµÙØ± Ù„Ù„ØªØ­Ù…ÙŠÙ„ */
            margin-right: 5px;
            align-self: flex-end;
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
        .file-preview {
            max-width: 100%;
            height: auto;
            margin-bottom: 10px;
            border-radius: 8px;
            object-fit: contain;
            background-color: rgba(0, 0, 0, 0.1);
            max-height: 250px;
        }
        
        .file-caption {
            font-size: 14px;
            margin-bottom: 5px;
            color: inherit;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
        .generic-file-preview {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 10px;
            gap: 10px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode .generic-file-preview {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .file-icon {
            font-size: 24px;
            color: #1da1f2;
        }

        .chat-footer {
            background-color: var(--bg-footer);
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-top: 1px solid var(--color-border);
            transition: background-color 0.3s ease;
            position: relative;
        }

        .input-container {
            flex: 1;
            display: flex;
            align-items: center;
            background-color: var(--bg-input);
            border-radius: 25px;
            padding: 5px 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: background-color 0.3s ease;
        }

        .chat-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
            padding: 8px;
            background: transparent;
            color: var(--color-text); 
        }
        
        .chat-container-modal.dark-mode .chat-input {
             color: white; 
        }

        .chat-input::placeholder {
            color: var(--color-placeholder);
        }

        .attach-btn, .voice-btn {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--color-icons);
            cursor: pointer;
        }

        .send-btn-chat { 
            background-color: #0088cc;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .send-btn-chat:hover {
            background-color: #005999;
        }

        .file-input {
            display: none;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        .recording-ui {
            display: none; 
            flex: 1;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            animation: fadeIn 0.3s ease;
        }

        .recording-timer {
            color: var(--color-text);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-container-modal.dark-mode .recording-timer {
             color: white;
        }

        .record-dot {
            width: 12px;
            height: 12px;
            background-color: red;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        .action-icon {
            font-size: 22px;
            cursor: pointer;
            padding: 10px;
            transition: color 0.2s;
        }

        .cancel-record {
            color: #ff4444;
        }
        
        .confirm-send {
            color: #0088cc;
        }
        
        .stop-record {
            color: #ffcc00;
        }

        .audio-preview {
            width: 100%;
            max-width: 200px;
            height: 35px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="nav-links">
            <a href="#">Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù</a>
            <a href="#">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</a>
            <a href="#" id="addThingHeaderBtn">Ø£Ø¶Ù Ø´Ø¦</a> </div>
        <div style="display: flex; align-items: center;">
            <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
            <img src="https://github.com/elmoftary-vr/Halthalk/raw/4a1dc7ecbb8371080b183f1b7b720d2a29fff926/20251205_163046.png" alt="Logo" class="logo">
            <img src="https://raw.githubusercontent.com/elmoftary-vr/Halthalk/3232d9c52d6dcba5f5d43b88b317e503e6682d8a/20251206_234458.png" alt="Logo Dark" class="logo-dark">
        </div>
    </div>

    <div class="sidebar">
        <a href="#" class="menu-item"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#" class="menu-item"><i class="fas fa-search"></i> Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù</a>
        <a href="#" class="menu-item"><i class="fas fa-bell"></i> Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</a>
        <a href="#" class="menu-item"><i class="fas fa-envelope"></i> Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</a>
        <a href="https://t.me/Halthalkrobot" class="menu-item" target="_blank" rel="noopener noreferrer"><i class="fas fa-user"></i> ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù…</a>
        <a href="https://t.me/Halthalk" class="menu-item" target="_blank" rel="noopener noreferrer"><i class="fas fa-info-circle"></i> Ù‚Ù†Ø§ØªÙ†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠØ©</a>
        <a href="#" class="menu-item" id="addThingSidebarBtn"><i class="fas fa-plus"></i> Ø£Ø¶Ù Ø´ÙŠØ¡</a> </div>

    <div class="main-content">
        <div class="welcome-section">
            <h1>Ø§Ù‡Ù„Ø§ Ø¨Ùƒ Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ Ù…Ù†ØµØ© Ø­Ù„ØªÙ‡Ø§Ù„Ùƒ</h1>
            <p> Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§ÙƒØ¨Ø± Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙŠ Ù…ØµØ± !</p>
        </div>

        <div class="buttons-section">
            <a href="https://halthalk.eyoo.org/" class="button floating-button">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</a>
            <a href="https://t.me/Halthalkrobot" class="button" target="_blank" rel="noopener noreferrer">ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù…</a>
            <a href="https://t.me/Halthalk" class="button" target="_blank" rel="noopener noreferrer">ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ù†ØµØ©</a>
        </div>

        <div class="tribute-text">
            Ù†Ø­Ù† Ù†ÙƒÙ† ÙƒÙ„ Ø§Ù„ÙØ¶Ù„ ÙˆØ§Ù„Ø­Ø¨ Ù„Ø£Ø³Ø§ØªØ°Ø© ÙƒØ§Ù†ÙˆØ§ Ø³Ø¨Ø¨Ù‹Ø§ ÙÙŠ Ø¥Ø´Ø¹Ø§Ù„ Ù†Ø§Ø± Ø§Ù„Ø£Ù…Ù„ ÙˆØ§Ù„Ù…Ø«Ø§Ø¨Ø±Ø©ØŒ ÙˆØ£ÙŠØ¶Ù‹Ø§ Ù‡Ù… Ø£Ø¹Ù…Ø¯Ø© Ø´Ø§Ù…Ø®Ø© ÙÙŠ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª Ø§Ù„Ø¢ØªÙŠØ©.
        </div>

        <div class="universities-section">
            <a href="https://www.muc.edu.eg/ar" target="_blank" rel="noopener noreferrer">
                <img src="https://raw.githubusercontent.com/elmoftary-vr/Halthalk/18be8bf95d514ff1448b40890a9145e82628b6bd/20251205_210105.png" alt="Ø¬Ø§Ù…Ø¹Ø©" class="university-image">
            </a>
            <a href="https://www.asu.edu.eg/ar" target="_blank" rel="noopener noreferrer">
                <img src="https://github.com/elmoftary-vr/Halthalk/raw/84bc7dc1984df945100ecfe600e0c6b6110b9417/20251205_211025.png" alt="Ø¬Ø§Ù…Ø¹Ø©" class="university-image">
            </a>
            <a href="https://cu.edu.eg/ar/Home" target="_blank" rel="noopener noreferrer">
                <img src="https://raw.githubusercontent.com/elmoftary-vr/Halthalk/b4c9610765891680e50029774974ec149952b1dd/20251205_210532.png" alt="Ø¬Ø§Ù…Ø¹Ø©" class="university-image">
            </a>
            <a href="https://www.helwan.edu.eg/" target="_blank" rel="noopener noreferrer">
                <img src="https://github.com/elmoftary-vr/Halthalk/blob/1d2589a3948597faac405d7c496ec7b3f039ab18/20251205_205841.png?raw=true" alt="Ø¬Ø§Ù…Ø¹Ø©" class="university-image">
            </a>
        </div>

        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-number" id="dailyVisits">0+</div>
                <div class="stat-title">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalMembers">0+</div>
                <div class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="activeStudents">0+</div>
                <div class="stat-title">Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†</div>
            </div>
        </div>

        <div class="footer">
            <a href="https://t.me/HalthalkBot" target="_blank" rel="noopener noreferrer">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© 2026</a>
        </div>
    </div>

    <div id="chatModal" class="modal">
        <div class="chat-container chat-container-modal">
            <div class="chat-header">
                <div class="header-left">
                    <a href="#" class="back-btn" id="closeModalBtn" title="Ø¥ØºÙ„Ø§Ù‚">
                        <i class="fas fa-times"></i> </a>
                    <div class="profile-pic"></div>
                    <div class="name-and-status">
                        <span class="name">ÙØ±ÙŠÙ‚ Ø­Ù„ØªÙ‡Ø§Ù„Ùƒ</span>
                        <span class="status">online</span>
                    </div>
                </div>
                <div class="header-icons">
                    <i class="fas fa-search"></i>
                    <i class="fas fa-ellipsis-v"></i>
                    <i class="fas fa-moon theme-toggle-chat" id="themeToggleChat"></i>
                </div>
            </div>
            <div class="chat-messages" id="messages">
                <div class="message">
                    <div class="message-bubble">
                        <div class="sender">ÙØ±ÙŠÙ‚ Ø­Ù„ØªÙ‡Ø§Ù„Ùƒ</div>
                        Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ğŸ©·<br>
                        ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ø¹Ù„ÙŠÙƒ Ù‡Ù†Ø§ Ù‡Ùˆ Ø¥Ù†Ùƒ ØªØ¶ÙŠÙ Ø¥Ù†Øª Ø¹Ø§ÙŠØ² ÙƒØªØ§Ø¨ Ø£Ùˆ Ø´Ø±Ø­ Ø£ÙŠ Ùˆ Ø¥Ø­Ù†Ø§ Ù‡Ù†Ø¶ÙŠÙÙ‡ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© <br><br>
                        Ùˆ Ø¯Ù‡ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù„Ùˆ ÙÙŠ Ø­Ø§Ø¬Ø© Ù…Ù‡Ù…Ø© Ø£ÙˆÙŠ ğŸ˜<a href="https://t.me/Halthalkrobot" target="_blank" style="color: #0088cc;">https://t.me/Halthalkrobot</a>
                        <div class="timestamp">2023-10-05 14:00:00 EET</div>
                    </div>
                </div>
            </div>
            
            <div class="chat-footer">
                <input type="file" id="fileInput" class="file-input" accept="*">
                
                <div class="recording-ui" id="recordingUI">
                    <i class="fas fa-trash-alt action-icon cancel-record" id="cancelRecordBtn" title="Ø¥Ù„ØºØ§Ø¡"></i>
                    
                    <div class="recording-info" id="recordingInfo">
                        <div class="recording-timer">
                            <span class="record-dot"></span>
                            <span id="timerDisplay">00:00</span>
                        </div>
                    </div>

                    <audio id="audioPreview" class="audio-preview" controls></audio>

                    <i class="fas fa-stop-circle action-icon stop-record" id="stopRecordBtn" title="Ø¥ÙŠÙ‚Ø§Ù ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø©"></i>
                    
                    <i class="fas fa-paper-plane action-icon confirm-send" id="sendRecordBtn" style="display: none;" title="Ø¥Ø±Ø³Ø§Ù„"></i>
                </div>

                <div class="default-footer-ui" id="defaultFooterUI" style="display: flex; width: 100%; align-items: center; gap: 10px;">
                    <button class="attach-btn" id="attachBtn"><i class="fas fa-paperclip"></i></button>
                    <div class="input-container">
                        <input type="text" class="chat-input" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©...">
                        <button class="voice-btn" id="voiceBtn"><i class="fas fa-microphone"></i></button>
                    </div>
                    <button class="send-btn-chat" id="sendBtnChat"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>


    <script>
        // -------------------------------------
        // --------- Ù…Ù†Ø·Ù‚ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ù€ Modal ---------
        // -------------------------------------
        
        // ... (ÙƒÙˆØ¯ ÙˆØ¸Ø§Ø¦Ù Ù…Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® ÙˆÙ…Ø¤Ø´Ø± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆÙ…Ù†Ø·Ù‚ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… ÙƒÙ…Ø§ Ù‡Ùˆ ÙÙŠ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚) ...
        
        // Ù…Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠØ©
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 'c' || e.key === 'C' || e.key === 'v' || e.key === 'V' || e.key === 'a' || e.key === 'A')) {
                e.preventDefault();
            }
        });

        // Counter animation for statistics
        function animateCounter(element, target, duration) {
            let start = 0;
            const increment = target / (duration / 10);
            const timer = setInterval(() => {
                start += increment;
                if (start >= target) {
                    start = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(start) + '+';
            }, 10);
        }

        const themeToggleMain = document.getElementById('themeToggle');
        const themeToggleChat = document.getElementById('themeToggleChat');
        const body = document.body;
        const chatContainerModal = document.querySelector('.chat-container-modal');

        function syncTheme(isDark) {
            if (isDark) {
                body.classList.add('dark-mode');
                themeToggleMain.querySelector('i').className = 'fas fa-sun';
                chatContainerModal.classList.add('dark-mode');
                themeToggleChat.className = 'fas fa-sun theme-toggle-chat';
            } else {
                body.classList.remove('dark-mode');
                themeToggleMain.querySelector('i').className = 'fas fa-moon';
                chatContainerModal.classList.remove('dark-mode');
                themeToggleChat.className = 'fas fa-moon theme-toggle-chat';
            }
             localStorage.setItem('darkMode', isDark);
        }

        window.addEventListener('load', () => {
            animateCounter(document.getElementById('dailyVisits'), 2651, 3000);
            animateCounter(document.getElementById('totalMembers'), 500000, 3000);
            animateCounter(document.getElementById('activeStudents'), 120000, 3000);
            
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            syncTheme(isDarkMode);
        });

        themeToggleMain.addEventListener('click', () => {
            const isDark = !body.classList.contains('dark-mode');
            syncTheme(isDark);
        });
        
        themeToggleChat.addEventListener('click', () => {
             const isDark = !body.classList.contains('dark-mode');
             syncTheme(isDark);
        });

        // Ù…Ù†Ø·Ù‚ ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        const chatModal = document.getElementById('chatModal');
        const addThingHeaderBtn = document.getElementById('addThingHeaderBtn');
        const addThingSidebarBtn = document.getElementById('addThingSidebarBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        
        function openChatModal(e) {
            e.preventDefault();
            chatModal.style.display = 'flex';
        }

        function closeChatModal(e) {
            e.preventDefault();
            chatModal.style.display = 'none';
        }

        addThingHeaderBtn.addEventListener('click', openChatModal);
        addThingSidebarBtn.addEventListener('click', openChatModal);
        closeModalBtn.addEventListener('click', closeChatModal);
        
        window.addEventListener('click', (event) => {
            if (event.target === chatModal) {
                closeChatModal(event);
            }
        });


        // -------------------------------------
        // --------- Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© (Telegram API) ---------
        // -------------------------------------

        const sendBtnChat = document.getElementById('sendBtnChat'); 
        const messageInput = document.getElementById('messageInput');
        const messages = document.getElementById('messages');
        const attachBtn = document.getElementById('attachBtn');
        const fileInput = document.getElementById('fileInput');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        const voiceBtn = document.getElementById('voiceBtn');
        const recordingUI = document.getElementById('recordingUI');
        const defaultFooterUI = document.getElementById('defaultFooterUI');
        const timerDisplay = document.getElementById('timerDisplay');
        const cancelRecordBtn = document.getElementById('cancelRecordBtn');
        const stopRecordBtn = document.getElementById('stopRecordBtn');
        const sendRecordBtn = document.getElementById('sendRecordBtn');
        const audioPreview = document.getElementById('audioPreview');
        const recordingInfo = document.getElementById('recordingInfo');

        const TELEGRAM_TOKEN = '8490684701:AAHUk7Ayn8RmrreRbfVLX41c5nI1EhR3CxE';
        const CHAT_ID = '7428842238';

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        let mediaRecorder;
        let audioChunks = [];
        let recordingInterval;
        let recordingTime = 0;
        let recordedBlob = null;
        
        // Ù…ÙˆÙ„Ø¯ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ Ø±Ø³Ø§Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        let messageIdCounter = 0; 
        
        function getEgyptTimestamp() {
            const now = new Date();
            const options = {
                timeZone: 'Africa/Cairo',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            const egyptTime = now.toLocaleString('en-US', options).replace(',', '');
            const isDST = now.toLocaleString('en-US', {timeZone: 'Africa/Cairo', timeZoneName: 'short'}).includes('EEST');
            const timezone = isDST ? 'EEST' : 'EET';
            return egyptTime + ' ' + timezone;
        }

        attachBtn.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (file) {
                const timestamp = getEgyptTimestamp();
                const currentMessageId = `msg-${++messageIdCounter}`;
                
                // 1. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆÙ…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù
                addUserMessageWithFile(file, timestamp, currentMessageId);
                
                // 2. Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                const loadingElement = document.getElementById(`loading-${currentMessageId}`);
                simulateLoading(loadingElement);

                // 3. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù
                const success = await sendFileToTelegram(file);
                
                // 4. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                if (success) {
                    removeLoadingIndicator(loadingElement, timestamp);
                    addConfirmationMessage(timestamp);
                } else {
                    removeLoadingIndicator(loadingElement, timestamp, true);
                    addErrorMessage(timestamp);
                }
            }
        });

        // --- Ù…Ù†Ø·Ù‚ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ ---
        function simulateLoading(loadingElement) {
            let progress = 0;
            const interval = 150; // 150ms per update
            
            const loadingTimer = setInterval(() => {
                progress += 5;
                if (progress > 95) {
                    clearInterval(loadingTimer);
                    // Ø§Ù„ØªÙˆÙ‚Ù Ø¹Ù†Ø¯ 95% Ø­ØªÙ‰ ÙŠØ£ØªÙŠ Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
                    loadingElement.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„... 95%';
                    return;
                }
                loadingElement.textContent = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„... ${progress}%`;
            }, interval);
            
            // Ø­ÙØ¸ Ø§Ù„Ù…Ø¤Ù‚Øª ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
            loadingElement.dataset.timer = loadingTimer; 
        }

        function removeLoadingIndicator(loadingElement, timestamp, isError = false) {
            if (loadingElement) {
                clearInterval(parseInt(loadingElement.dataset.timer));
                
                const messageBubble = loadingElement.closest('.message-bubble');
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
                const timestampElement = messageBubble.querySelector('.timestamp');
                timestampElement.textContent = timestamp;
                
                // Ø¥Ø²Ø§Ù„Ø© Ø¹Ù†ØµØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                loadingElement.remove();
                
                if (isError) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ØŒ Ù†ØºÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ù†Ø¶ÙŠÙ Ù…Ø¤Ø´Ø± Ø®Ø·Ø£
                    messageBubble.style.backgroundColor = '#cc0000'; // Ø£Ø­Ù…Ø± Ù„Ù„Ø®Ø·Ø£
                    messageBubble.style.borderColor = '#990000';
                    timestampElement.style.color = 'white';
                }
            }
        }
        
        // --- Ù†Ù‡Ø§ÙŠØ© Ù…Ù†Ø·Ù‚ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ ---
        
        // --- Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ ---
        
        function getFileIcon(mimeType) {
            if (mimeType.startsWith('image/')) return 'fas fa-image';
            if (mimeType.startsWith('video/')) return 'fas fa-video';
            if (mimeType.startsWith('audio/')) return 'fas fa-microphone';
            if (mimeType.endsWith('/pdf')) return 'fas fa-file-pdf';
            if (mimeType.includes('zip') || mimeType.includes('rar')) return 'fas fa-file-archive';
            return 'fas fa-file';
        }

        function buildFilePreviewHTML(file, fileUrl) {
            let mediaHTML = '';
            const mimeType = file.type;
            const iconClass = getFileIcon(mimeType);

            if (mimeType.startsWith('image/')) {
                mediaHTML = `<img src="${fileUrl}" class="file-preview" alt="Image Preview">`;
            } else if (mimeType.startsWith('video/')) {
                mediaHTML = `<video src="${fileUrl}" class="file-preview" controls></video>`;
            } else if (mimeType.startsWith('audio/')) {
                 mediaHTML = `<audio src="${fileUrl}" controls style="width: 100%;"></audio>`;
            } else {
                 mediaHTML = `
                    <div class="generic-file-preview">
                        <i class="${iconClass} file-icon"></i>
                        <span>${file.name}</span>
                    </div>
                `;
            }

            return `
                ${mediaHTML}
                <div class="file-caption">${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)</div>
            `;
        }


        function addUserMessageWithFile(file, timestamp, messageId) {
            const fileUrl = URL.createObjectURL(file);
            const previewHTML = buildFilePreviewHTML(file, fileUrl);
            
            const userMessage = document.createElement('div');
            userMessage.className = 'message sent';
            userMessage.dataset.messageId = messageId;
            
            userMessage.innerHTML = `
                <div class="message-bubble">
                    ${previewHTML}
                    <div class="loading-indicator" id="loading-${messageId}">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„... 0%</div>
                    <div class="timestamp" style="display:none;">${timestamp}</div>
                </div>
            `;
            
            messages.appendChild(userMessage);
            messages.scrollTop = messages.scrollHeight;
            
            // Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ØŒ Ù†Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆÙ‚ÙŠØª ÙˆÙ†Ø®ÙÙŠ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const loadingElement = document.getElementById(`loading-${messageId}`);
            if (loadingElement) {
                loadingElement.style.display = 'block';
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ù…Ø¤Ù‚ØªØ§Ù‹
                userMessage.querySelector('.timestamp').style.display = 'none'; 
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØµÙŠØ©
        sendBtnChat.addEventListener('click', async () => { 
            const text = messageInput.value.trim();
            if (text) {
                const timestamp = getEgyptTimestamp();
                const currentMessageId = `msg-${++messageIdCounter}`;
                
                addUserTextMessage(text, timestamp, currentMessageId);
                messageInput.value = '';
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                const loadingElement = document.getElementById(`loading-${currentMessageId}`);
                simulateLoading(loadingElement);
                
                const success = await sendMessageToTelegram(text);
                
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                if (success) {
                    removeLoadingIndicator(loadingElement, timestamp);
                    addConfirmationMessage(timestamp);
                } else {
                    removeLoadingIndicator(loadingElement, timestamp, true);
                    addErrorMessage(timestamp);
                }
            }
        });

        function addUserTextMessage(content, timestamp, messageId) {
            const userMessage = document.createElement('div');
            userMessage.className = 'message sent';
            userMessage.dataset.messageId = messageId;
            
            userMessage.innerHTML = `
                <div class="message-bubble">
                    ${content}
                    <div class="loading-indicator" id="loading-${messageId}">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„... 0%</div>
                    <div class="timestamp" style="display:none;">${timestamp}</div>
                </div>
            `;
            messages.appendChild(userMessage);
            messages.scrollTop = messages.scrollHeight;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø¹Ù†ØµØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙˆÙ‚ÙŠØª
            document.getElementById(`loading-${messageId}`).style.display = 'block';
            userMessage.querySelector('.timestamp').style.display = 'none';
        }


        // --- Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠ (Ù…Ø­Ø¯Ø« Ù„ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¤Ø´Ø±) ---

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        sendRecordBtn.addEventListener('click', async () => {
            if (recordedBlob) {
                const timestamp = getEgyptTimestamp();
                const currentMessageId = `msg-${++messageIdCounter}`;
                const file = new File([recordedBlob], "voice_message.webm", { type: "audio/webm" });
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ù…Ù„Ù Ø§Ù„ØµÙˆØªÙŠ
                addUserMessageWithFile(file, timestamp, currentMessageId);
                resetUI();
                
                // Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                const loadingElement = document.getElementById(`loading-${currentMessageId}`);
                simulateLoading(loadingElement);
                
                const success = await sendFileToTelegram(file);
                
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                if (success) {
                    removeLoadingIndicator(loadingElement, timestamp);
                    addConfirmationMessage(timestamp);
                } else {
                    removeLoadingIndicator(loadingElement, timestamp, true);
                    addErrorMessage(timestamp);
                }
            }
        });
        
        // Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (startTimer, stopTimer, updateTimerDisplay, showRecordingUI, resetUI) Ù„Ù… ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§.
        
        voiceBtn.addEventListener('click', async () => {
             // ... (Ù†ÙØ³ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚) ...
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª.');
                return;
            }

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                recordedBlob = null;

                mediaRecorder.ondataavailable = event => {
                    audioChunks.push(event.data);
                };

                mediaRecorder.onstop = () => {
                    recordedBlob = new Blob(audioChunks, { type: 'audio/webm;codecs=opus' });
                    const audioUrl = URL.createObjectURL(recordedBlob);
                    audioPreview.src = audioUrl;
                };

                mediaRecorder.start();
                startTimer();
                showRecordingUI();

            } catch (err) {
                console.error('ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†:', err);
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù„Ù„ØªØ³Ø¬ÙŠÙ„.');
            }
        });

        stopRecordBtn.addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                stopTimer();
                
                stopRecordBtn.style.display = 'none';
                recordingInfo.style.display = 'none';
                
                audioPreview.style.display = 'block';
                sendRecordBtn.style.display = 'block';
            }
        });

        cancelRecordBtn.addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
            }
            stopTimer();
            resetUI();
        });
        
        function startTimer() {
            recordingTime = 0;
            updateTimerDisplay();
            recordingInterval = setInterval(() => {
                recordingTime++;
                updateTimerDisplay();
            }, 1000);
        }

        function stopTimer() {
            clearInterval(recordingInterval);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(recordingTime / 60).toString().padStart(2, '0');
            const seconds = (recordingTime % 60).toString().padStart(2, '0');
            timerDisplay.textContent = `${minutes}:${seconds}`;
        }

        function showRecordingUI() {
            defaultFooterUI.style.display = 'none';
            recordingUI.style.display = 'flex';
            
            stopRecordBtn.style.display = 'block';
            recordingInfo.style.display = 'flex';
            audioPreview.style.display = 'none';
            sendRecordBtn.style.display = 'none';
        }

        function resetUI() {
            recordingUI.style.display = 'none';
            defaultFooterUI.style.display = 'flex';
            audioPreview.src = '';
            recordedBlob = null;
            if (mediaRecorder) {
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        }
        
        // --- Ù†Ù‡Ø§ÙŠØ© Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ---

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendBtnChat.click(); 
            }
        });

        // ØªÙ… ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¶Ø§Ø±Ø¨ ÙˆØªØ­Ø¯ÙŠØ¯Ù‡Ø§ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØµÙŠØ© ÙÙ‚Ø·
        // function addUserMessage(content, timestamp) { ... } 

        async function sendMessageToTelegram(text) {
            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: text
                    })
                });
                return response.ok;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
                return false;
            }
        }

        async function sendFileToTelegram(file) {
            const formData = new FormData();
            formData.append('chat_id', CHAT_ID);

            let apiEndpoint;
            if (file.type.startsWith('image/')) {
                apiEndpoint = 'sendPhoto';
                formData.append('photo', file);
            } else if (file.type.startsWith('video/')) {
                apiEndpoint = 'sendVideo';
                formData.append('video', file);
            } else if (file.type.startsWith('audio/')) {
                apiEndpoint = 'sendAudio';
                formData.append('audio', file);
            } else {
                apiEndpoint = 'sendDocument';
                formData.append('document', file);
            }

            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/${apiEndpoint}`, {
                    method: 'POST',
                    body: formData
                });
                return response.ok;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù:', error);
                return false;
            }
        }

        function addConfirmationMessage(timestamp) {
            const confirmation = document.createElement('div');
            confirmation.className = 'message';
            confirmation.innerHTML = `
                <div class="message-bubble">
                    <div class="sender">ÙØ±ÙŠÙ‚ Ø­Ù„ØªÙ‡Ø§Ù„Ùƒ</div>
                    Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø·Ù„Ø¨ÙƒÙ…â¤ï¸<br>
                    ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ùˆ Ø³ÙŠÙ‚ÙˆÙ… Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨ÙƒğŸ¤ğŸ’<br>
                    <small>Ù…Ù„Ø­ÙˆØ¸Ø©: Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ùˆ Ù„ÙŠØ³Øª Ù„Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§</small>
                    <div class="timestamp">${timestamp}</div>
                </div>
            `;
            messages.appendChild(confirmation);
            messages.scrollTop = messages.scrollHeight;
        }

        function addErrorMessage(timestamp) {
            const errorMsg = document.createElement('div');
            errorMsg.className = 'message';
            errorMsg.innerHTML = `
                <div class="message-bubble">
                    <div class="sender">ÙØ±ÙŠÙ‚ Ø­Ù„ØªÙ‡Ø§Ù„Ùƒ</div>
                    Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹. ğŸ˜”
                    <div class="timestamp">${timestamp}</div>
                </div>
            `;
            messages.appendChild(errorMsg);
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
</body>
</html>
